<!DOCTYPE html>
<html>
  <head>
    <title>Custom sort names EXTJS 4 grids</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap-theme.min.css">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css">
    <link rel="stylesheet" href="/stylesheets/styles.css">
    <link rel="stylesheet" href="/stylesheets/syntax.css">
    <meta name="author" content="Daniel Nolan" />
    <link rel="alternate" type="application/rss+xml" title="danielnolandotcom" href="/feed.rss">
    <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/html5shiv/3.7.2/html5shiv.min.js"></script>
      <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
    <![endif]-->
  </head>
  <body>
    <nav class="navbar navbar-fixed-top navbar-inverse" role="navigation">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <div>
          <a class="navbar-brand" href="/">danielnolandotcom</a>
        </div>
      </div>

      <div class="collapse navbar-collapse">
        <ul class="nav navbar-nav hidden-md hidden-lg">
          <li><a href="/">Home</a></li>
          <li><a href="/archive.html">Archive</a></li>
          <li class="dropdown">
            <a class="dropdown-toggle" data-toggle="dropdown" href="#">
              Categories <span class="caret"></span>
            </a>
            <ul class="dropdown-menu">
              
                <li><a href="/categories/git">GIT</a></li>
              
                <li><a href="/categories/hardware">HARDWARE</a></li>
              
                <li><a href="/categories/javascript">JAVASCRIPT</a></li>
              
                <li><a href="/categories/ruby">RUBY</a></li>
              
                <li><a href="/categories/testing">TESTING</a></li>
              
                <li><a href="/categories/tmux">TMUX</a></li>
              
                <li><a href="/categories/vim">VIM</a></li>
              
                <li><a href="/categories/web">WEB</a></li>
              
            </ul>
          </li>
        </ul>
      </div>
    </nav>

  <div class="container">
    <div class="row">
      <div class="col-md-3 col-md-push-9 hidden-sm hidden-xs">
        <div class"sideBoxContent">
  <p>
  <img src="http://www.gravatar.com/avatar/1894aa33479313caba1a8d8a0bc13f3b.png" alt="..." class="img-circle">
  </p>
  <p>
  <span class="fa-stack fa-lg">
    <a href="https://github.com/danielnolan" title="Gihub">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-github-square fa-stack-1x fa-inverse"></i>
    </a>
  </span>
  <span class="fa-stack fa-lg">
    <a href="https://twitter.com/danielnolan" title="Twitter">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
    </a>
  </span>
  <span class="fa-stack fa-lg">
    <a href="https://www.linkedin.com/in/danielnolan80"
       title="Linkedin" data-proofer-ignore>
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
    </a>
  </span>
  <span class="fa-stack fa-lg">
    <a href="http://danielnolan.com/feed.rss" title="RSS">
      <i class="fa fa-circle fa-stack-2x"></i>
      <i class="fa fa-rss fa-stack-1x fa-inverse"></i>
    </a>
  </span>
  </p>
  <h3>
    A Little About Me...
  </h3>
  <p>
  I&#39;m a web application developer, living in Florida.
  Originally from GA, I was born a Falcons and Braves fan.
  Vim is my editor of choice. I&lt;3 mechanical keyboards and the HHKB layout.
  Ruby is my language of choice, although I consider myself a full-stack
  polyglot developer. I like to try different craft beers, I prefer IPAs,
  the hoppier the better! I like to take pictures too, although I don&#39;t
  have as much time to dedicate to it as I wish I did.
  </p>
</div>
<div class="sideBoxContent hidden-sm hidden-xs">
  <h3>Categories</h3>
  <ul class="nav nav-pills nav-stacked">
    
    <li><a href="/categories/git">GIT</a></li>
    
    <li><a href="/categories/hardware">HARDWARE</a></li>
    
    <li><a href="/categories/javascript">JAVASCRIPT</a></li>
    
    <li><a href="/categories/ruby">RUBY</a></li>
    
    <li><a href="/categories/testing">TESTING</a></li>
    
    <li><a href="/categories/tmux">TMUX</a></li>
    
    <li><a href="/categories/vim">VIM</a></li>
    
    <li><a href="/categories/web">WEB</a></li>
    
  </ul>
  <h3>Archive</h3>
  <ul class="nav nav-pills nav-stacked">
    <li><a href="/archive.html">POSTS BY YEAR</a></li>
  </ul>
</div>


      </div>
      <div class="col-md-9 col-md-pull-3">
        <div class="well"><!-- grey blog post area -->

  <article class="blog-post"><!-- blog post content in here -->
    <span class="date-tag"><!-- blog post date tag wrapper -->
      <i class="fa fa-calendar"></i>
      07 March 2012
    </span>

    <h1 class="post-title">Custom sort names EXTJS 4 grids</h1><!-- blog post H1 title -->

    <p>I build grids all the time in EXTJS 4 and they are usually dealing with a ton of data so server side sorting is a must.
EXTJS sends the header name of the grid column and and the sort direction to the server by default. That's all fine and dandy
but most of the time my column header names differ from the names I need to send to the server for proper sorting.
So here is what I came up with.</p>

<p>First I add a config called customSort to my column configs. The customSort will be the value that is sent to
the server when clicking the grid column header.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
17
18
19
20
21
22
23
24
25
26
27
28
29
30
31
32
33
34
35
36
37
</pre></td><td class="code"><pre><span class="kd">var</span> <span class="nx">gridColumns</span> <span class="o">=</span> <span class="p">[{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Id'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'id'</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">75</span>
<span class="p">},{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Queue Cat'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'queue_cat'</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">100</span><span class="p">,</span>
    <span class="na">customSort</span><span class="p">:</span> <span class="s1">'DocumentQueueCategory.name'</span>
<span class="p">},{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Queued to Customer'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'queued_to_customer'</span><span class="p">,</span>
    <span class="na">flex</span><span class="p">:</span> <span class="mi">1</span><span class="p">,</span>
    <span class="na">customSort</span><span class="p">:</span> <span class="s1">'User.lastname'</span>
<span class="p">},{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Locked By'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'locked_by'</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="na">customSort</span><span class="p">:</span> <span class="s1">'LockedBy.lastname'</span>
<span class="p">},{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Last Act. Admin'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'last_activity_admin'</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">150</span><span class="p">,</span>
    <span class="na">customSort</span><span class="p">:</span> <span class="s1">'LastActAdmin.lastname'</span>
<span class="p">},{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Created'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'created'</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>
    <span class="na">format</span><span class="p">:</span> <span class="s1">'m/d/y g:i a'</span><span class="p">,</span>
    <span class="na">xtype</span><span class="p">:</span> <span class="s1">'datecolumn'</span>
<span class="p">},{</span>
    <span class="na">text</span><span class="p">:</span> <span class="s1">'Modified'</span><span class="p">,</span>
    <span class="na">dataIndex</span><span class="p">:</span> <span class="s1">'modified'</span><span class="p">,</span>
    <span class="na">width</span><span class="p">:</span> <span class="mi">110</span><span class="p">,</span>
    <span class="na">format</span><span class="p">:</span> <span class="s1">'m/d/y g:i a'</span><span class="p">,</span>
    <span class="na">xtype</span><span class="p">:</span> <span class="s1">'datecolumn'</span>
<span class="p">}];</span></pre></td></tr></tbody></table></code></pre></figure>

<p>Then in the store for my grid I add some code to the before load listener to check
for a customSort param on each column. If the param is found the store will send
the customSort value to the server, if no customSort value is found it will send the column header name as normal.</p>

<figure class="highlight"><pre><code class="language-javascript" data-lang="javascript"><table class="rouge-table"><tbody><tr><td class="gutter gl"><pre class="lineno">1
2
3
4
5
6
7
8
9
10
11
12
13
14
15
16
</pre></td><td class="code"><pre><span class="nx">listeners</span><span class="p">:</span> <span class="p">{</span>
  <span class="nl">beforeload</span><span class="p">:</span> <span class="kd">function</span> <span class="p">(</span><span class="nx">store</span><span class="p">,</span> <span class="nx">options</span><span class="p">)</span> <span class="p">{</span>
    <span class="k">if</span><span class="p">(</span><span class="nx">store</span><span class="p">.</span><span class="nx">sorters</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">]){</span>
      <span class="kd">var</span> <span class="nx">oldSortParam</span> <span class="o">=</span> <span class="nx">store</span><span class="p">.</span><span class="nx">sorters</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">property</span><span class="p">;</span>
      <span class="k">for</span><span class="p">(</span><span class="kd">var</span> <span class="nx">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span> <span class="nx">i</span> <span class="o">&lt;</span> <span class="nx">gridColumns</span><span class="p">.</span><span class="nx">length</span><span class="p">;</span> <span class="nx">i</span><span class="o">++</span><span class="p">)</span> <span class="p">{</span>
        <span class="kd">var</span> <span class="nx">currentCol</span> <span class="o">=</span> <span class="nx">gridColumns</span><span class="p">[</span><span class="nx">i</span><span class="p">];</span>
        <span class="k">if</span><span class="p">(</span><span class="nx">currentCol</span><span class="p">.</span><span class="nx">sortable</span> <span class="o">&amp;&amp;</span> <span class="nx">currentCol</span><span class="p">.</span><span class="nx">customSort</span> <span class="o">&amp;&amp;</span>
           <span class="nx">currentCol</span><span class="p">.</span><span class="nx">dataIndex</span> <span class="o">==</span> <span class="nx">oldSortParam</span><span class="p">)</span> <span class="p">{</span>
             <span class="nx">store</span><span class="p">.</span><span class="nx">sorters</span><span class="p">.</span><span class="nx">items</span><span class="p">[</span><span class="mi">0</span><span class="p">].</span><span class="nx">property</span> <span class="o">=</span>
             <span class="nx">currentCol</span><span class="p">.</span><span class="nx">customSort</span><span class="p">;</span>
             <span class="k">break</span><span class="p">;</span>
        <span class="p">}</span>
     <span class="p">}</span>
    <span class="p">}</span>
  <span class="p">}</span>
<span class="p">}</span></pre></td></tr></tbody></table></code></pre></figure>


    
    <div class="blog-tags"><!-- keyword tag section -->

      <i class="fa fa-tags"></i>
      
      <a href="/tags/javascript">Javascript, </a>
      
      <a href="/tags/sencha">Sencha, </a>
      
      <a href="/tags/extjs">EXTJS</a>
      
    </div>
    
  </article><!-- end post content -->
  <div id="disqus_thread"></div>
  <script type="text/javascript">
    /* * * CONFIGURATION VARIABLES: EDIT BEFORE PASTING INTO YOUR WEBPAGE * * */
    var disqus_shortname = 'danielnolan'; // required: replace example with your forum shortname

    /* * * DON'T EDIT BELOW THIS LINE * * */
    (function() {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
  </script>
  <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
  <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
</div><!-- end grey content area -->

      </div>
    </div>
  </div>
    <script src="//code.jquery.com/jquery-2.1.1.min.js"></script>
    <script src="//maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>
    
</body>
</html>

